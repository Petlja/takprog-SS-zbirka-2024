

# Мајнкрафт вООда

Аутор: Павле Мартиновић
Текст, тест примери, тестирање и анализа решења: Игор Павловић и Павле Мартиновић

### Корени у коровима

Чак иако је инспирација за задатак заиста дошла из начина како се пропагирају тзв. *source block*-ови у игрици Мајнкрафт, поједини ученици могли су препознати везу између овог задатка и такмичарског задатка из фолклора: Дата је табла $10\times10$ и $9$ поља су обрасла коровом. Ако је поље суседно са два поља обрасла коровом, онда и оно постане обрасло коровом. Да ли је могуће да цела табла буде обрасла коровом? У овом задатку је одговор НЕ, а разлог зашто је одговор НЕ може нам послужити као добра водиља за решавање оваквог задатка.

Наиме обим фигуре на ком је обрасла коров никад не расте, може само да се смањи. Ако се појави поље које је суседно $3$ или чак $4$ корова, онда нам се обим смањује. Како је на почетку обим највише $36$, а на крају треба бити $40$, одговор на питање у задатку је негативан.

Главна хеуристика коју можемо одмах понети одавде је да никад (или барем да се трудимо да избегнемо) не поплавимо поље које је суседно већ неком поплављеном пољу
### Анализа примера
Први пример је мали и може се урадити мање више ручно. Оцена обима из првог дела нам даје да је $27$ оптималан одговор.

Други пример је већи, али му је свака позевазана компонента правоугаоник. За правоугаонике се проблем може решити тачно, и да се докаже тачност оценом горе.

Трећи пример је мали, али је вероватно тешко решити ручно, осим ако се уложи јако пуно времена, већ је реалније да га такмичар програмом направи некако и онда ручно доради ако треба. И овде је нађена оцена оптимална.

Четврти пример је као компликована верзија другог где имамо правоугаонике, али они могу и да се секу. Комисијско решење овде налази одговор $16316$, док нам обим даје границу од $16315$, тако да смо овај пример решили или оптимално или скоро оптимално.

Примери $5-8$ су мало дивљији, и оцена која је дата у првој секцији није толико близу конструкција које је нашла комисија. Примери $5$ и $7$ су цртани руком, док су $6$ и $8$ рандом шум, са различитим густинама. Пример $8$ је огроман, тако да било шта мало спорије може јако дуго да се извршава. Са њим морамо бити посебно пажљиви.

### Ауторско решење 1 (86 поена, решава 4. пример)

Сваки пут кад поставимо нову воду лако можемо да симулирамо како се вода даље креће помоћу неког алгоритма налик flood-fill алгоритма. Прво поставимо воду у поља која имају макс једног проходног суседа. Даље сваком поље доделимо неку тежину са којом га треба изабрати. Ако је већ суседан неком поплављеном пољу, штетићемо обиму, тако да му на тежину додајемо $-10000$. За свако суседно поље које ће постати поплављено ако додамо воде на то поље додамо $1000$. Боље је стављати у ћошкове него на отворено емпиријки, па додамо на тежину $100\cdot(4-\deg)$. Најзад (и ово се испоставља као кључно за налажења решења у приемру $4$) додамо малу рандом тежину, до $10$ на пример. У сваком тренутку бирамо поље са највећом тежину и њега поплавимо и испропагирамо све. За свако плављење морамо да ажурирамо тежине $12$ поља који су на дистанци највише $2$ од поплављеног поља, па цео алгоритам ради јако брзо. На пример, осми пример решава у року од једног минута.

### Ауторско решење 2 (98 поена, решава све осим 4-ог примера)

Анлогно претходном решенју можемо прво поставити воду у она поља која имају тачно једног слободног суседа а затим симулирати додавање нових блокова применом неког алгоритма за обилазак графа. Кључна разлика овог решења у односу на претходно је што за наредно поплављено поље бирамо оно поље које ће поплавити највећи број поља уколико на њега поставимо блок са водом. За проналажење таквог поља неопходно је симулирати поплаву за сваког кандидата који може поплавити више од једног поља, то јест има бар једног суседа који је суседан са тачно једним поплављеним пољем. Приметимо да је сложеност једне итерације ограничена одозго са бројем кандидата у тој итерацији пута број поплављених поља након те итерације. На основу тога можемо закључити да сложеност овог решења није већа од $О(N^2M^2)$. Међутим, у приложеним примерима је број кандидата у свакој итерацији значајно мањи од $NM$ па је и сложеност овог решења значајно мања и може се применити на примерима од 1 до 7. За решење примера 8 у временском периоду прикладном за дужину трајања такмичења неопходно је изделити целу таблу на мање табле димензија 300x300 и решити их засебно а затим спојити у једно решење. Да бисмо освојили последњих неколико поена на овом задатку потребно је приметити да решење зависи од поља које изаберемо између оних поља са једнаким резултатом симулације. Како бисмо додатно побољшали скор могуће је применити исти алгоритам на разлиците изометријске трансформације улаза и изабрати најбоље решење.
