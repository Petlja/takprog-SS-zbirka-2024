---
title: Размена знака - опис решења
---

# Размена знака

Аутор: Павле Мартиновић
Текст и тест примери: Павле Мартиновић
Анализа решења: Драган Урошевић
Тестирање: Драган Урошевић

### Анализа

Претпоставимо за тренутак да се операција коју извршава Жика састоји само од замене места два суседна елемента, тј. да се не извршава промена знака. Може се показати да се применом такве операције, од полазног низа може добити било који низ састављен од елемената низа $A$, тј. било који распоред елемената низа $A$:
$$
A_{i_1}, A_{i_2}, A_{i_3}, \dots, A_{i_n}. 
$$

Ако се операција коју изводи Жика састоји и од промене знака, онда је за одређивање вредности неког елемента након извођења свих операција довољно да знамо његову почетну позицију и његову позицију на крају (тј. након свих изведених операција). Наиме, чак и у случају да се исти елемент померао лево-десно (према почетку и према крају), његов знак на крају ће бити одређен само растојањем између почетне о крајње позиције (зато што се при сваком померању лево-десно или десно-лево изводи паран број операција, па елемент низа промени знак паран број пута, а то значи да има исти знак као да то померање лево-десно није ни изводио).

Према томе, ако се елемент $A_i$ преместио са позиције $i$ на позицију $j$ ($j\lt i$), онда ће његова вредност бити  $B_j = (-1)^{i-j}A_i$, тј. $B_j = (-1)^i : (-1)^j A_i$, односно важиће $(-1)^j B_j = (-1)^i A_i$. Слично, ако се елемент $A_i$ преместио са позиције $i$ на позицију $j$ ($j>i$), онда ће његова вредност бити  $B_j = (-1)^{j-i}A_i = (-1)^{i-j}A_i$, тј. $B_j = (-1)^i : (-1)^j A_i$, односно важиће $(-1)^j B_j = (-1)^i A_i$.   Одавде закључујемо да Жика од низа $A$ може добити низ $B$ ако и само ако се низови $C$ ($C_i = (-1)^iA_i$) и $D$ ($D_i = (-1)^iB_i$) састоје од истих елемената (наравно, не нужно на истим позицијама).

 ### Решење првог подзадатка
 У овом случају је довољно одредити позиције елемената који су различити од нуле. Ако је $A_i \ne 0$ и $B_j \ne 0$, тада могу наступити три случаја
 
-   Ако је $A_i = B_j$ и $2 | (i-j)$, онда се од низа $A$ може добити низ $B$;
-   Ако је $A_i = -B_j$ и $2 \not | (i-j)$, онда се од низа $A$ може добити низ $B$;
-   Ако не важи ниједан од два горња услова, онда од низа $A$ није могуће добити низ $B$.

Сложеност описаног решења је $\Theta(n)$.

 ### Решење другог подзадатка
Према анализи, низ $B$ се може добити од низа $A$ ако и само ако се низови $C$ ($C_i = (-1)^iA_i$) и $D$ ($D_i = (-1)^iB_i$) састоје од истих елемената. Међутим сви елементи низова $C$ и $D$ имају вредност $1$ или $-1$ и довољно је избројати да ли низови $C$ и $D$ имају исти број елемената чија је вредност $1$ (односно исти број елемената чија је вредност $-1$),
Сложеност описаног решења је $\Theta(n)$.

 ### Решење трећег подзадатка
У овом случају можемо сортирати низове парова $E$ $(E_i = (|A_i|, i))$ и $F$  $(F_i=(|B_i|, i))$, при чему парове поредимо по вредности првог елемента (компоненте) пара. Тада од низа $A$ можемо добити низ $B$, ако и само ако за све одговарајуће парове важи
-   први елементи парова морају бити једнаки (јер они представљају апсолутне вредности одговарајућих елемената низова $A$ и $B$);
-   други елементи парова представљају позиције тих елемената у низовима $A$ и $B$; на основу позиција можемо сазнати и одговарајуће елементе низова $A$ и $B$; они треба да буду једнаки (ако је разлика позиција парна) или супротних знакова (ако је разлика позиција непарна).

Сложеност описаног решења је $\Theta(n\log n)$, због сортирања низова.
 
 
### Главно решење
Користимо чињеницу да низови $C$ и $D$, описани у Анализи, треба да садрже исте елементе (наравно, ако се од низа $A$  може добити низ $B$). Ако те низове сортирамо, онда одговарајући елементи имају једнаке вредности. Због тога можемо сортирати низове $C$ и $D$ и проверити да ли су одговарајући елементи једнаки. Сложеност описаног решења је $\Theta(n\log n)$, због сортирања низова.






