---
title: Санте - опис решења
---

# Санте

Аутор: Момчило Тошић<br>
Текст и тест примери: Момчило Тошић<br>
Тестирање: Марко Миленковић<br>
Анализа решења: Момчило Тошић<br>

Корисно је уочити да санте формирају граф од $N$ чворова и $M$ грана, где свака грана има тежину 0 или 1. Могуће је без промене стања машине кретати се само преко грана оне тежине које је тренутно стање (0 - машина не ради, 1 - машина ради). Почетно стање је 0.

### Решење када $M = N-1$ и из сваке санте иде једна или две гране

Овако задате санте формирају низ где је свака повезана са претходном и следећом (осим прве и последње).
Можемо доћи од једне до друге санте на јединствен начин (покушамо да идемо лево од Мике док не стигнемо до краја, или до Лазе, и исто тако надесно), и симулирати промене
стања.

### Решење кад је пут између сваке две санте тешко проходан

Овде је једини могући одговор 1 или -1, зависно од тога да ли је могуће доћи од Микине до Лазине санте. Ово можемо проверити неким алгортимом попут $DFS$-а (рекурзивни обилазак сваке санте са памћењем посећених).

### Решење кад је $M = N-1$ и увек се може доћи од једне до друге санте

Граф који санте описују у овој групи примера је стабло. Као у првом подзадатку, јединствен је начин да се дође од једне санте до друге (особина стабла), само је овај пут
потребно користити неки алгоритам за налажење пута (овде је пут скуп грана, а не термин из текста) између два чвора (као $BFS$), и симулирати промене стања машине на њему.

### Решење за пун број поена

Приметимо да уколико је стање машине $s$, а налазимо се у чвору $u$, могуће је слободно (без повећања коначног одговора) се кретати по свим чворовима
до којих се гранама тежине $s$ може доћи из $u$. Дакле, конструкција нашег решења може изгледати тако што прво обиђемо све чворове до којих се може доћи из почетног користећи гране
тежине 0, затим променити тежину и наћи све достижне преко грана тежине један од претходно достигнутих итд. (наравно не обилазећи већ посећене чворове).<br>
Елегантну имплементацију ове идеје нам пружа такозвани $0-1$ $BFS$. У реду са два краја (double ended queue) памтимо чвор као и стање у ком се налазимо кад га посећујемо (на почетку додамо Микину санту и 0),
и на почетак реда додајемо оне чворове који су повезани гранама тежине која одговара стању чвора, 
док се на крај додају чворови повезани гранама супротне тежине (и у оба случаја ажурирамо цену доласка до неког чвора). Овако смо се осигурали да прво пролазимо кроз
све доступне из првог чвора без промене стања, а да даље не мењамо стање док нисмо обишли све који се достижу једном променом стања, итд.<br>
На крају једноставно проверимо да ли је обиђен Лазин чвор, и која је цена његовог обиласка.<br> Временска и меморијска сложеност су $O(N+M)$.<br>

### Решење 2 (за пун број поена)

Како је могуће слободно се кретати од неког чвора по одређеној групи чворова, можемо груписати чворове у 0-компоненте и 1-компоненте (зависно од тога каквим се гранама крећемо) $DFS$-ом,
а затим формирати нови граф у ком повезујемо две компоненте уколико не постоји чвор преко ког је могуће прећи из једне у другу (у овом чвору мењамо стање машине). Касније налазимо најкраћи пут између одговарајућих
компоненти у овом графу $BFS$-ом (с тим што је почетна удаљеност 1 уколико крећемо од 1-компоненте). Свака компонента је или 1 или 0 компонента и има најмање један чвор, те 
њих има реда величине $N$, док грана између њих има највише $N$ (јер један чвор представља грану између компоненти) - дакле ред величине сложености је поново линеаран.

*Напомена: спорија имплементација идеје за 100 поена (нпр Дајкстрин алгоритам у квадратној сложености уместо 0-1 BFS) ће радити за вредности N и M до 5000*
