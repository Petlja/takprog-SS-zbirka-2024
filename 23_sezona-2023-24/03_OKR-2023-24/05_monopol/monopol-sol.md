---
title: Монопол - опис решења
---

# Монопол

Аутор: Богдан Петровић
Текст и тест примери: Алекса Милојевић
Анализа решења: Алекса Милисављевић
Тестирање: Алекса Милисављевић


### Решење када $N \leq 10$

У овом подзадатку можемо да симулирамо свих $2^N$ могућности грађења продавница и потом за сваки град пронађемо најближу продавницу у $O(N)$. Укупна временска сложеност је $O(2^N \cdot N^2)$. 


### Решење када у сваком граду станује исти број људи

Нека је број становника сваког града $g$. Посматрајмо две постојеће узастопне продавнице. Нека су оне у градовима $i$ и $j$ и нека између те две продавнице постоји барем један град. Приметимо да са градњом две додатне продавнице, једном у $i+1$ а другом у $j-1$, Сања може да преузме муштерије из свих градова из (цикличног) интервала $[i+1,j-1]$. Дакле, ако градимо две продавнице у (цикличном) интервалу $[i+1,j-1]$, преузећемо све муштерије из тог интервала. Ако градимо само једну, преузећемо пола муштерија, тачније: $g \cdot ( \frac{j-i-2}{2} + 1 )$ муштерија. Задатак решавамо _greedy_ алгоритмом. У сваком кораку бирамо интервал у коме је оптимално изградити нову продавницу. Приметимо да, ако је то прва продавница из интервала, постављањем ње добијамо $g \cdot ( \frac{j-i-2}{2} + 1 )$ нових муштерија, док за другу добијамо $g \cdot ( \frac{j-i-2}{2}  )$ нових муштерија. Дакле, довољно је да сортирамо свих $2K$ добитака опадајуће и одаберемо префикс најмање дужине тако да је његова сума строго већа од половине укупног броја становника. Ово решење ради у временској сложености $O(K \log K)$.


### Решење када $N \leq 3\,000$

За ово решење је довољно да модификујемо претходно решење, тако што за сваки циклични интервал тражимо оптималну позицију за прву продавницу која ће бити изграђена у њему. Ово можемо постићи у сложености $O(N^2)$, провером колико нам сваки одабир доноси муштерија.

Приметите да је неопходан услов да би _greedy_ радио тај да прва продавница изграђена у интервалу доноси барем онолико муштерија колико ће донети и друга (Зашто?). Приметимо и да је тај услов овде испуњен, јер ће прва продавница преузети барем половину муштерија из интервала. Наиме, приметите да градњом на позицији $i+1$ преузимамо целу прву половину интервала, док градњом на позицији $j-1$ преузимамо целу другу половину интервала. Једна од ове две вредности је барем половина суме целог интервала. 

### Главно решење

За главно решење, довољно је оптимизовати решење претходног подзадатка. Коришћењем префиксних сума, могуће је у $O(N)$ проверити колико ће муштерија из одговарајућег интервала преузери прва продавница изграђена у њему.

