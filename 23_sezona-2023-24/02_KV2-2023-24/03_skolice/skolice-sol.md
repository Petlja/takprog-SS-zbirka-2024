---
title: Школице - опис решења
---

# Школице
Аутор: Александар Вишњић
Текст и тест примери: Александар Вишњић
Анализа решења: Игор Павловић
Тестирање: Александар Вишњић

## Решење када $A_i = 1$
Стајање на било који степеник има исту "цену". Потребно је стати на укупно што је мање могуће степеника. Решење зависи само од дужине низа за игру. За сваки упит је засебно рачунамо и нека она износи $M_i$ код $i$-тог друга. Решење код истог је $\lfloor \frac{M_i}{2} \rfloor$.

## Решење када $N\leq 10, Q\leq 100$
Сваки низ за игру нема величину већу од $10$. Укупан број начина скакања није велик, те их можемо симулирати рекурзијом. Бирамо онај начин који даје најмањи резултат.

## Решење када $N,Q \leq 4\, 000$
Сазнајмо прво како решавамо задатак за један одређен низ за игру. Нека је тај низ $B_1,B_2,\ldots B_M$. Ово представља класичан задатак из динамичког програмирања. Нека је ${dp}_i$ минимална цена стајања на поље $i$ (почев од $0$, заједно уз све скокове до тог поља). Почетне вредности су ${dp}_0 = 0$ и ${dp}_1 = B_1$. За $i>1$ рекурентна веза је $${dp}_i = \min({dp}_{i-1},{dp}_{i-2})  + B_i$$
Одговор на тражено питање је ${dp}_{M+1}$. Неопходно је засебно разматрати случаје $M=0$ (низ за игру је празан) и $M=1$. У њима је одговор увек $0$.

Сложеност алгоритма по смицалици је $O(N)$. Дакле, укупно $O(Q\cdot N)$.

## Главно решење

Неопходно је брже налазити одговоре за сваку смицалицу. Дозвољено нам је да пре њихових тражења израчунамо неке вредности у низу $A_1,A_2,\ldots , A_N$. Од користи ће бити слично динамичко програмирање као у претходном подзадатку. У овом чувамо и префикс и суфикс. Тачније, нека ${pref}_i$ представља најмању цену потребну за стајање на поље $i$ почев од поља $0$. А нека ${suf}_i$ представља најмању цену потребну за стајање на поље $i$ почев од поља $N+1$. Ова два низа се рачунају на аналоган начин са динамичким програмирањем из претходног подзадатка.

Прећимо сад на смицалице. Дајемо поступак за решавање случаја $1 < L \leq R < N$. Ивичне случаје остављамо читаоцу за вежбу. Приметимо да, користећи индексе из низа $A$, Перица мора стати на барем једно од поља $L-1$ и $R+1$ (јер је у низу за игру њихово растојање заправо $1$) . Формално, постоје $3$ случаја:

1. Перица је прошао само кроз поље $L-1$;
2. Перица је прошао само кроз поље $R+1$;
3. Перица је прошао кроз оба поља.

Кад спојимо све случаје, одговор на смицалицу постаје $$\min({pref}_{L-1}+{suf}_{R+2}, \ \ {pref}_{L-2}+{suf}_{R+1},\ \ {pref}_{L-1}+{suf}_{R+1})$$

Префиксне и суфиксне низове рачунамо у сложености $O(N)$. За сваку смицалицу налазимо решење у $O(1)$. Укупна сложеност је $O(N+Q)$.
